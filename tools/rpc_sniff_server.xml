<?xml version="1.0" encoding="UTF-8"?>
<ObjectComposer xmlns="http://codac.iter.org/sup/di" version="1.0"
           name="Basic configuration server for robot tests"
           xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
           xs:schemaLocation="http://codac.iter.org/sup/di sup-di.xsd">
    <LoadLibrary>libsup-epics-di.so</LoadLibrary>
    <LoadLibrary>libsup-di-services.so</LoadLibrary>
    <LoadLibrary>.build/librpc-sniff-server.so</LoadLibrary>
    <!-- Launch an RPC server that outputs its input and returns a fixed value. -->
    <StringInstance>
        <InstanceName>reply_path</InstanceName>
        <Value>reply.json</Value>
    </StringInstance>
    <StringInstance>
        <InstanceName>service_name</InstanceName>
        <Value>TEST:SNIFF</Value>
    </StringInstance>
    <Instance>
        <TypeName>AnyValueFromJSONFile</TypeName>
        <InstanceName>reply</InstanceName>
        <Dependency>reply_path</Dependency>
    </Instance>
    <Instance>
        <TypeName>RPCSniffServer</TypeName>
        <InstanceName>sniff_server</InstanceName>
        <Dependency>reply</Dependency>
    </Instance>
    <Instance>
        <TypeName>PvAccessRPCServerConfig</TypeName>
        <InstanceName>service_config</InstanceName>
        <Dependency>service_name</Dependency>
    </Instance>
    <Instance>
        <TypeName>PvAccessRPCServer</TypeName>
        <InstanceName>rpc_server</InstanceName>
        <Dependency>service_config</Dependency>
        <Dependency>sniff_server</Dependency>
    </Instance>
    <CallFunction>
        <FunctionName>KeepAlive</FunctionName>
    </CallFunction>
</ObjectComposer>
